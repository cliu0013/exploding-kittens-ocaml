<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Deck.html">
<link rel="next" href="Main.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Author" rel="Chapter" href="Author.html">
<link title="Deck" rel="Chapter" href="Deck.html">
<link title="Move" rel="Chapter" href="Move.html">
<link title="Main" rel="Chapter" href="Main.html"><title>Move</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Deck.html" title="Deck">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Main.html" title="Main">Next</a>
</div>
<h1>Module <a href="type_Move.html">Move</a></h1>

<pre><span id="MODULEMove"><span class="keyword">module</span> Move</span>: <code class="code">sig</code> <a href="Move.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>Represents the game state and contains the REPL loop for the game.</p>
</div>
</div>
<hr width="100%">

<pre><span id="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">bool</code></pre>
<pre><span id="VALnoped"><span class="keyword">val</span> noped</span> : <code class="type"><a href="Deck.html#TYPEplayer_id">Deck.player_id</a> list</code></pre>
<pre><code><span id="TYPEgame_state"><span class="keyword">type</span> <code class="type"></code>game_state</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTgame_state.WIN"><span class="constructor">WIN</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTgame_state.LOSS"><span class="constructor">LOSS</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTgame_state.CONTINUE"><span class="constructor">CONTINUE</span></span></code></td>

</tr></table>



<pre><code><span id="TYPEe"><span class="keyword">type</span> <code class="type"></code>e</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.curr_id">curr_id</span>&nbsp;: <code class="type"><a href="Deck.html#TYPEplayer_id">Deck.player_id</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.next_id">next_id</span>&nbsp;: <code class="type"><a href="Deck.html#TYPEplayer_id">Deck.player_id</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.num_alive">num_alive</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.num_players">num_players</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.game">game</span>&nbsp;: <code class="type"><a href="Deck.html#TYPEt">Deck.t</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.game_st">game_st</span>&nbsp;: <code class="type"><a href="Move.html#TYPEgame_state">game_state</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTe.noped">noped</span>&nbsp;: <code class="type"><a href="Deck.html#TYPEplayer_id">Deck.player_id</a> list</code>;</code></td>

</tr></table>
<code>}</code>



<pre><span id="VALengine_init"><span class="keyword">val</span> engine_init</span> : <code class="type"><a href="Deck.html#TYPEt">Deck.t</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">engine_init</code> initializes the engine for the game</p>
</div>
</div>

<pre><span id="VALcompare_name"><span class="keyword">val</span> compare_name</span> : <code class="type"><a href="Deck.html#TYPEcard_id">Deck.card_id</a> -> <a href="Deck.html#TYPEcard_id">Deck.card_id</a> -> int</code></pre>
<pre><span id="VALprint_player"><span class="keyword">val</span> print_player</span> : <code class="type"><a href="Deck.html#TYPEp">Deck.p</a> -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_player p id</code> prints the hand of player <code class="code">id</code></p>
</div>
</div>

<pre><span id="VALturn_start"><span class="keyword">val</span> turn_start</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">turn_start</code> handles the logic for what happens at the beginning of
    a turn. Command line prompts are issued, and cards are used when
    appropriate. <code class="code">turn_start</code> calls <code class="code">prompt_user</code> if it is the human
    player's turn and <code class="code">manage_ai</code> otherwise.</p>
</div>
</div>

<pre><span id="VALuse_spec_card"><span class="keyword">val</span> use_spec_card</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Deck.html#TYPEcard_name">Deck.card_name</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_spec_card e card_name</code> uses the card specified by <code class="code">card_name</code></p>
</div>
</div>

<pre><span id="VALuse_kittens"><span class="keyword">val</span> use_kittens</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Deck.html#TYPEcard_name">Deck.card_name</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_kittens e card_name</code> is called when a user uses a kitten, e.g.:
    Tacocat. Command line prompts are made to get a valid number of
    kittens to use and the appropriate action is applied.</p>
</div>
</div>

<pre><span id="VALhandle_transfer"><span class="keyword">val</span> handle_transfer</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> int -> <a href="Deck.html#TYPEt">Deck.t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">handle_transfer e num</code> is a helper function for <code class="code">use_kittens</code> and
    carries out whatever action is appropriate given the usage of <code class="code">num</code>
    kittens. 2: random card stolen from a to-be-asked-for player. 3:
    specific card stolen</p>
</div>
</div>

<pre><span id="VALprompt_for_int"><span class="keyword">val</span> prompt_for_int</span> : <code class="type">string -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">prompt_for_int msg</code> outputs <code class="code">msg</code> on the command line and checks
    that the user's response is an integer. If the user does not enter
    an integer, they are asked to do so again.</p>
</div>
</div>

<pre><span id="VALprompt_for_int_filter"><span class="keyword">val</span> prompt_for_int_filter</span> : <code class="type">string -> (<a href="Deck.html#TYPEt">Deck.t</a> -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a> -> bool) -> <a href="Deck.html#TYPEt">Deck.t</a> -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">prompt_for_int msg filter t</code> outputs <code class="code">msg</code> on the command line and
    checks that the user's response is an integer. It also checks if
    that integer is a valid given a specificed <code class="code">filter</code> and <code class="code">t</code>. If the
    user does not enter a valid integer, they are asked to do so again.</p>
</div>
</div>

<pre><span id="VALprompt_for_name"><span class="keyword">val</span> prompt_for_name</span> : <code class="type"><a href="Deck.html#TYPEt">Deck.t</a> -> string -> <a href="Deck.html#TYPEcard_name">Deck.card_name</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">prompt_for_name t msg</code> outputs <code class="code">msg</code> on the command line and checks
    that the response is an actual card in the given <code class="code">t</code>.</p>
</div>
</div>

<pre><span id="VALend_turn"><span class="keyword">val</span> end_turn</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Deck.html#TYPEst">Deck.st</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">end_turn e st</code> takes care of the card draw that ends the turn and
    sets the player that goes next</p>
</div>
</div>

<pre><span id="VALprompt_user"><span class="keyword">val</span> prompt_user</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> string -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">prompt_user e msg</code> makes the command line prints and reads on the
    user's inputs. It checks if the user's inputs are valid card names
    or keywords like 'Pass' and acts based on the user's state.</p>
</div>
</div>

<pre><span id="VALmanage_ai"><span class="keyword">val</span> manage_ai</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">manage_ai</code> is the logic for ai players</p>
</div>
</div>

<pre><span id="VALnoped_append"><span class="keyword">val</span> noped_append</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">noped_append e i</code> adds player <code class="code">i</code> to the noped list in <code class="code">e</code></p>
</div>
</div>

<pre><span id="VALnoped_remove"><span class="keyword">val</span> noped_remove</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Deck.html#TYPEplayer_id">Deck.player_id</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">noped_remove e i</code> removes player <code class="code">i</code> to the noped list in <code class="code">e</code></p>
</div>
</div>

<pre><span id="VALmanage_bombed"><span class="keyword">val</span> manage_bombed</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">manage_bombed</code> is called whenever a user draws a bomb. If they have
    a defuse, they are prompted to use it. Otherwise, they lose the
    game.</p>
</div>
</div>

<pre><span id="VALuse_attack"><span class="keyword">val</span> use_attack</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_attack</code> uses the Attack card for the current player. Their turn
    is immediately ended, and if they were ATTACKED before, they are
    SAFE now. The next player's state is changed to ATTACKED.</p>
</div>
</div>

<pre><span id="VALuse_shuffle"><span class="keyword">val</span> use_shuffle</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre>
<pre><span id="VALuse_nope"><span class="keyword">val</span> use_nope</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_nope</code> uses the Nope card for the current player. The player is
    prompted to provide a non-human player id to be added to the Noped
    list. Players on the Noped list have their next non-Defuse action
    cancelled.</p>
</div>
</div>

<pre><span id="VALuse_favor"><span class="keyword">val</span> use_favor</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_favor</code> uses the Favor card for the current player.The player is
    prompted to provide a non-human player id to steal a random card
    from and then steals from that player. If the player's hand is
    empty, another player id must be specified.</p>
</div>
</div>

<pre><span id="VALuse_future"><span class="keyword">val</span> use_future</span> : <code class="type"><a href="Move.html#TYPEe">e</a> -> <a href="Move.html#TYPEe">e</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">use_future</code> uses the Future card for the current player. The top
    three cards' names are printed onto the command line.</p>
</div>
</div>
</body></html>
